# エディターツールの使用方法

このドキュメントでは、Hockey ゲーム開発用のカスタムエディターツールの使用方法について説明します。

## プレイヤー作成ツール

プレイヤープレハブを作成するためのツールです。

### 開き方
Unity メニューバーから `Hockey > Create Player Prefab` を選択

### 設定項目
- **Player Material**: プレイヤーの見た目の材質
  - プレイヤーの外観を決定する材質（Material）を指定
  - ドラッグ&ドロップまたはプロジェクトウィンドウから選択可能

- **Player Size**: プレイヤーの直径（デフォルト: 1.0）
  - プレイヤーの横方向のサイズを指定
  - 値が大きいほど、プレイヤーが大きくなります

- **Player Height**: プレイヤーの高さ（デフォルト: 0.2）
  - プレイヤーの縦方向の高さを指定
  - オセロの駒のような形状のため、通常は Size より小さい値を指定

- **Circle Segments**: 円の分割数（デフォルト: 32）
  - プレイヤーの円形の滑らかさを決定
  - 値が大きいほど滑らかになりますが、処理負荷も増加

### 作成されるもの
- プレイヤープレハブが `Assets/Resources/Prefabs/Player.prefab` に作成されます
- 以下のコンポーネントが自動的に追加されます：
  - Player スクリプト
  - Rigidbody（物理演算用）
  - CapsuleCollider（衝突判定用）

## ステージ作成ツール

ゲームステージを作成するためのツールです。

### 開き方
Unity メニューバーから `Hockey > Create Stage` を選択

### 設定項目
- **Stage Width**: ステージの幅（デフォルト: 30）
  - ステージの横幅を指定
  - プレイヤーのサイズに応じて適切な値を設定

- **Stage Length**: ステージの長さ（デフォルト: 40）
  - ステージの奥行きを指定
  - プレイヤーの移動範囲を決定

- **Stage Material**: ステージの材質
  - ステージ全体（床と壁）の見た目を決定する材質を指定
  - ドラッグ&ドロップまたはプロジェクトウィンドウから選択可能

- **Obstacle Prefab**: 障害物のプレハブ
  - ステージ上にランダムに配置される障害物のプレハブを指定
  - 任意の3Dオブジェクトを使用可能

- **Obstacle Count**: 障害物の数（デフォルト: 10）
  - ステージ上に配置される障害物の数を指定
  - ステージサイズに応じて適切な値を設定

- **Player Area Clearance**: プレイヤーエリアの空きスペース（デフォルト: 10）
  - プレイヤーの初期位置周辺の、障害物が配置されない範囲を指定
  - プレイヤーがゲーム開始時に動きやすくするための設定

### 作成されるもの
- ステージプレハブが `Assets/Resources/Prefabs/Stage.prefab` に作成されます
- 以下の要素が含まれます：
  - 床（Plane）
  - 四方の壁（Cube）
  - ランダムに配置された障害物

## シーン作成ツール

ゲームシーンを自動的にセットアップするためのツールです。

### 開き方
Unity メニューバーから `Hockey > Setup Game Scene` を選択

### 設定項目
- **Player Prefab**: プレイヤープレハブ
  - 先に作成したプレイヤープレハブを指定
  - `Assets/Resources/Prefabs/Player.prefab` から選択可能

- **Stage Prefab**: ステージプレハブ
  - 先に作成したステージプレハブを指定
  - `Assets/Resources/Prefabs/Stage.prefab` から選択可能

### 作成されるもの
シーンに以下のオブジェクトとコンポーネントが自動的に配置されます：

1. GameManager
   - ゲーム全体を管理するコンポーネント
   - 各マネージャーの参照を自動設定

2. StageManager
   - ステージの管理を担当
   - 指定されたステージプレハブを使用

3. PlayerManager
   - プレイヤーの管理を担当
   - 指定されたプレイヤープレハブを使用

4. MouseInputController
   - マウス入力の処理を担当
   - プレイヤーの移動制御に使用

5. MainCamera
   - ゲームビューを提供するカメラ
   - 45度俯瞰視点で自動配置
   - 位置: (0, 10, -10)
   - 回転: (45, 0, 0)

### 使用手順
1. 新しいシーンを作成または既存のシーンを開く
2. プレイヤープレハブとステージプレハブを事前に作成しておく
3. シーン作成ツールを開く
4. 必要なプレハブを指定
5. 「Setup Scene」ボタンをクリック

### 注意事項

1. プレハブの準備
   - プレイヤープレハブとステージプレハブを事前に作成しておく必要があります
   - プレハブは正しくセットアップされている必要があります（必要なコンポーネントが付与されているなど）

2. 既存のシーン
   - 既存のシーンでツールを使用する場合、同名のオブジェクトが存在していると上書きされる可能性があります
   - 重要なシーンの場合は、バックアップを取ることを推奨

3. カメラ設定
   - MainCamera の設定は自動的に行われます
   - 必要に応じて、位置や角度を手動で調整可能

4. コンポーネントの参照
   - 各マネージャー間の参照は自動的に設定されます
   - 手動で追加のコンポーネントを設定する場合は、既存の参照を保持するよう注意

## 注意事項

1. プレハブの作成前の準備
   - 必要なマテリアルを事前に作成しておく
   - 障害物用の3Dオブジェクトを準備しておく

2. プレハブの保存場所
   - 全てのプレハブは `Assets/Resources/Prefabs` フォルダに保存
   - このフォルダが存在しない場合は自動的に作成

3. 推奨される使用順序
   1. プレイヤープレハブの作成
   2. 障害物用オブジェクトの準備
   3. ステージプレハブの作成
   4. GameManager でのプレハブの参照設定

4. パフォーマンスの考慮
   - 障害物の数は適度に設定
   - プレイヤーの Circle Segments は必要以上に大きくしない

## 推奨される全体的な作業フロー

1. プレイヤープレハブの作成
   - Player Creator ツールを使用
   - 必要に応じてマテリアルを作成

2. 障害物の準備
   - 必要な3Dモデルの用意
   - マテリアルの設定

3. ステージプレハブの作成
   - Stage Creator ツールを使用
   - 障害物の配置を確認

4. シーンのセットアップ
   - Scene Setup ツールを使用
   - 作成したプレハブを指定

5. 最終調整
   - カメラアングルの微調整
   - ライティングの設定
   - その他必要な調整